---
import BaseLayout from '../layouts/BaseLayout.astro';

const categories = [
  {
    title: 'レッスンについて',
    items: [
      { q: '体験レッスンはありますか？', a: 'はい、随時受付しております。3,000円（税別）で45〜60分の体験レッスンをご受講いただけます。お申し込みはオンラインフォームまたはお電話にて承っております。' },
      { q: '何歳から通えますか？', a: 'ピアノ・バイオリンは4〜5歳から、声楽は小学生から承っています。上限年齢はございません。シニアの方も多数在籍されています。' },
      { q: '楽器が自宅にありませんが大丈夫ですか？', a: 'まずは体験レッスンを受けてみてから楽器を選ぶことをおすすめしています。楽器の選び方・購入先についてのアドバイスも行っています。' },
      { q: 'レッスンは何分ですか？', a: 'プランによって異なりますが、体験レッスンは45〜60分、通常レッスンは45分・60分・90分からお選びいただけます。' },
    ],
  },
  {
    title: '料金・手続きについて',
    items: [
      { q: '月の途中から入会できますか？', a: 'はい、月途中からでも入会可能です。その場合の月謝は日割り計算となります。' },
      { q: '振替レッスンはありますか？', a: 'はい、ご都合の悪い場合は振替レッスンが可能です（プランによって振替回数が異なります）。欠席される場合は前日までにご連絡ください。' },
      { q: '休会はできますか？', a: '1ヶ月以上の長期休会を希望される場合は、1ヶ月前までにお申し出ください。休会中は月額3,000円の籍保留費をいただいております。' },
    ],
  },
  {
    title: '設備・環境について',
    items: [
      { q: 'レッスン室は防音になっていますか？', a: 'はい、全レッスン室が完全防音になっています。また、グランドピアノ・電子ピアノを各室に完備しています。' },
      { q: '駐車場はありますか？', a: '教室には専用駐車場はございませんが、近隣にコインパーキングが複数ございます。電車・バスのご利用をおすすめしています。' },
      { q: '子ども1人で通えますか？', a: '年齢・保護者のご判断によりますが、多くのお子様が1人でご来室されています。教室スタッフが到着・出発時にサポートします。' },
    ],
  },
];

const jsonLd = {
  '@context': 'https://schema.org',
  '@type': 'FAQPage',
  mainEntity: categories.flatMap(cat =>
    cat.items.map(item => ({
      '@type': 'Question',
      name: item.q,
      acceptedAnswer: { '@type': 'Answer', text: item.a },
    }))
  ),
};
---

<BaseLayout
  title="よくあるご質問"
  description="Harmony Music Schoolへのよくあるご質問。レッスン・料金・設備について詳しく解説しています。"
  jsonLd={jsonLd}
>
  <section class="py-24 bg-cream-100 border-b border-cream-200">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
      <p class="text-forest-700 text-xs tracking-widest uppercase mb-3">FAQ</p>
      <h1 class="font-serif text-5xl text-charcoal-900">よくあるご質問</h1>
    </div>
  </section>

  <section class="py-24">
    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 space-y-16">
      {categories.map((cat, ci) => (
        <div class="fade-in" style={`transition-delay: ${ci * 100}ms`}>
          <h2 class="font-serif text-2xl text-charcoal-900 mb-6 pb-3 border-b-2 border-gold-400">
            {cat.title}
          </h2>
          <div class="space-y-3">
            {cat.items.map((item, i) => (
              <details class="group border border-cream-200 bg-cream-50">
                <summary class="flex items-start justify-between p-6 cursor-pointer list-none gap-4">
                  <h3 class="font-medium text-charcoal-900 flex items-start gap-2">
                    <span class="text-forest-700 flex-shrink-0">Q.</span>
                    {item.q}
                  </h3>
                  <span class="flex-shrink-0 w-5 h-5 mt-0.5 text-charcoal-700 group-open:rotate-180 transition-transform duration-200">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                    </svg>
                  </span>
                </summary>
                <div class="px-6 pb-6 border-t border-cream-200">
                  <div class="pt-4 flex gap-2 text-sm text-charcoal-700 leading-relaxed">
                    <span class="text-gold-500 font-medium flex-shrink-0">A.</span>
                    <p>{item.a}</p>
                  </div>
                </div>
              </details>
            ))}
          </div>
        </div>
      ))}

      <!-- CTA -->
      <div class="fade-in text-center bg-cream-100 border border-cream-200 p-12">
        <h2 class="font-serif text-2xl text-charcoal-900 mb-4">解決しない場合は</h2>
        <p class="text-sm text-charcoal-700 mb-8">お気軽にお問い合わせください。担当者が丁寧にご回答します。</p>
        <a href="/contact" class="inline-block px-8 py-4 bg-forest-700 text-cream-50 text-sm hover:bg-forest-600 transition-colors">
          お問い合わせはこちら
        </a>
      </div>
    </div>
  </section>

</BaseLayout>
